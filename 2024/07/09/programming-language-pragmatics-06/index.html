<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Serif:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&family=Roboto+Mono:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha256-dABdfBfUoC8vJUBOwGVdm8L9qlMWaHTIfXt+7GnZCIo=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/themes/blue/pace-theme-minimal.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script>

<script class="next-config" data-name="main" type="application/json">{"hostname":"misakatang.cn","root":"/","images":"/images","scheme":"Pisces","darkmode":false,"version":"8.22.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12,"onmobile":false},"hljswrap":true,"copycode":{"enable":true,"style":null,"show_result":false},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"duration":200,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script>

    <meta name="description" content="Control Flowthe language mechanisms used to specify ordering into several categories:  Sequencing Selection Iteration Procedural abstraction Recursion Concurrency Exception handling and speculation No">
<meta property="og:type" content="article">
<meta property="og:title" content="《Programming Language Pragmatics》第六章笔记">
<meta property="og:url" content="http://misakatang.cn/2024/07/09/programming-language-pragmatics-06/index.html">
<meta property="og:site_name" content="MisakaTang&#39;s Blog">
<meta property="og:description" content="Control Flowthe language mechanisms used to specify ordering into several categories:  Sequencing Selection Iteration Procedural abstraction Recursion Concurrency Exception handling and speculation No">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2024-07-09T11:45:14.000Z">
<meta property="article:modified_time" content="2025-01-04T03:05:07.629Z">
<meta property="article:author" content="MisakaTang">
<meta property="article:tag" content="编译器">
<meta property="article:tag" content="Programming Language Pragmatics">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://misakatang.cn/2024/07/09/programming-language-pragmatics-06/">


<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"http://misakatang.cn/2024/07/09/programming-language-pragmatics-06/","path":"2024/07/09/programming-language-pragmatics-06/","title":"《Programming Language Pragmatics》第六章笔记"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>《Programming Language Pragmatics》第六章笔记 | MisakaTang's Blog</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-4TSLH4NC9H"></script>
  <script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"G-4TSLH4NC9H","only_pageview":false,"measure_protocol_api_secret":null}</script>
  <script src="/js/third-party/analytics/google-analytics.js"></script>

  <script src="/js/third-party/analytics/baidu-analytics.js"></script>
  <script async src="https://hm.baidu.com/hm.js?de7c77febeeac252eee468207ae11ce4"></script>



  <script>
    (function(c,l,a,r,i,t,y){
        c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
        t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
        y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
    })(window, document, "clarity", "script", "jtb4czrfeu");
</script>


  <script async defer data-website-id="b9e21e4f-5512-43e5-ab60-01a527a98a8c" src="https://umami-kappa-cyan.vercel.app/script.js" data-host-url="https://umami-kappa-cyan.vercel.app"></script>


  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<link rel="alternate" href="/atom.xml" title="MisakaTang's Blog" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">MisakaTang's Blog</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li>
  </ul>
</nav>




</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Control-Flow"><span class="nav-text">Control Flow</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Expression-Evaluation"><span class="nav-text">Expression Evaluation</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Precedence-and-Associativity"><span class="nav-text">Precedence and Associativity</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Assignments"><span class="nav-text">Assignments</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#side-effect"><span class="nav-text">side effect</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#References-and-Values"><span class="nav-text">References and Values</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Boxing"><span class="nav-text">Boxing</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Initialization"><span class="nav-text">Initialization</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Dynamic-Checks"><span class="nav-text">Dynamic Checks</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Definite-Assignment"><span class="nav-text">Definite Assignment</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Constructors"><span class="nav-text">Constructors</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Ordering-within-Expressions"><span class="nav-text">Ordering within Expressions</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Applying-Mathematical-Identities%EF%BC%88%E6%95%B0%E5%AD%A6%E6%81%92%E7%AD%89%E5%BC%8F%EF%BC%89"><span class="nav-text">Applying Mathematical Identities（数学恒等式）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Short-Circuit-Evaluation%EF%BC%88%E7%9F%AD%E8%B7%AF%E8%A1%A8%E8%BE%BE%E5%BC%8F%EF%BC%89"><span class="nav-text">Short-Circuit Evaluation（短路表达式）</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Structured-and-Unstructured-Flow"><span class="nav-text">Structured and Unstructured Flow</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Structured-Alternatives-to-goto"><span class="nav-text">Structured Alternatives to goto</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Multilevel-Returns"><span class="nav-text">Multilevel Returns</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Errors-and-Other-Exceptions"><span class="nav-text">Errors and Other Exceptions</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Continuations"><span class="nav-text">Continuations</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Sequencing"><span class="nav-text">Sequencing</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Selection"><span class="nav-text">Selection</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Short-Circuited-Conditions"><span class="nav-text">Short-Circuited Conditions</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Case-Switch-Statements"><span class="nav-text">Case&#x2F;Switch Statements</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Iteration"><span class="nav-text">Iteration</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Enumeration-Controlled-Loops%EF%BC%88for%E5%BE%AA%E7%8E%AF%EF%BC%89"><span class="nav-text">Enumeration-Controlled Loops（for循环）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Combination-Loops"><span class="nav-text">Combination Loops</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Iterators"><span class="nav-text">Iterators</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Recursion-%E9%80%92%E5%BD%92"><span class="nav-text">Recursion 递归</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Iteration-and-Recursion"><span class="nav-text">Iteration and Recursion</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Applicative-and-Normal-Order-Evaluation"><span class="nav-text">Applicative- and Normal-Order Evaluation</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Nondeterminacy"><span class="nav-text">Nondeterminacy</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Summary-and-Concluding-Remarks"><span class="nav-text">Summary and Concluding Remarks</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="MisakaTang"
      src="/images/misaka.jpg">
  <p class="site-author-name" itemprop="name">MisakaTang</p>
  <div class="site-description" itemprop="description">The limits of my language are the limits of my world</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/%E5%BD%92%E6%A1%A3/">
          <span class="site-state-item-count">110</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">104</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/TangMisaka23001" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;TangMisaka23001" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:mikasatang@gmail.com" title="E-Mail → mailto:mikasatang@gmail.com" rel="noopener me" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>

        </div>
      </div>
    </div>

    
    <div class="sidebar-inner sidebar-blogroll">
      <div class="links-of-blogroll animated">
        <div class="links-of-blogroll-title"><i class="fa fa-globe fa-fw"></i>
          链接
        </div>
        <ul class="links-of-blogroll-list">
            <li class="links-of-blogroll-item">
              <a href="http://blog.bbchen.top/" title="http:&#x2F;&#x2F;blog.bbchen.top" rel="noopener" target="_blank">BB chen的漂流记</a>
            </li>
            <li class="links-of-blogroll-item">
              <a href="http://blog.zhuzhenyuan.cn/" title="http:&#x2F;&#x2F;blog.zhuzhenyuan.cn" rel="noopener" target="_blank">Aurthur_的博客</a>
            </li>
        </ul>
      </div>
    </div>
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://misakatang.cn/2024/07/09/programming-language-pragmatics-06/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/misaka.jpg">
      <meta itemprop="name" content="MisakaTang">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="MisakaTang's Blog">
      <meta itemprop="description" content="The limits of my language are the limits of my world">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="《Programming Language Pragmatics》第六章笔记 | MisakaTang's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          《Programming Language Pragmatics》第六章笔记
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2024-07-09 11:45:14" itemprop="dateCreated datePublished" datetime="2024-07-09T11:45:14+00:00">2024-07-09</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-01-04 03:05:07" itemprop="dateModified" datetime="2025-01-04T03:05:07+00:00">2025-01-04</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/%E5%88%86%E7%B1%BB/%E6%8A%80%E6%9C%AF/" itemprop="url" rel="index"><span itemprop="name">技术</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><h2 id="Control-Flow"><a href="#Control-Flow" class="headerlink" title="Control Flow"></a>Control Flow</h2><p>the language mechanisms used to specify ordering into several categories:</p>
<ul>
<li>Sequencing</li>
<li>Selection</li>
<li>Iteration</li>
<li>Procedural abstraction</li>
<li>Recursion</li>
<li>Concurrency</li>
<li>Exception handling and speculation</li>
<li>Nondeterminacy</li>
</ul>
<h3 id="Expression-Evaluation"><a href="#Expression-Evaluation" class="headerlink" title="Expression Evaluation"></a>Expression Evaluation</h3><p>An expression generally consists of either a simple object (e.g., a literal constant, or a named variable or constant) or an operator or function applied to a collection of operands or arguments, each of which in turn is an expression. </p>
<h4 id="Precedence-and-Associativity"><a href="#Precedence-and-Associativity" class="headerlink" title="Precedence and Associativity"></a>Precedence and Associativity</h4><p>运算符的优先级和结合性</p>
<h4 id="Assignments"><a href="#Assignments" class="headerlink" title="Assignments"></a>Assignments</h4><p>computation typically consists of an ordered series of changes to the values of variables in memory. <strong>Assignments</strong> provide the principal means by which to make the changes.</p>
<h5 id="side-effect"><a href="#side-effect" class="headerlink" title="side effect"></a>side effect</h5><p>Assignment is perhaps the most fundamental <strong>side effect</strong>: while the evaluation of an assignment may sometimes yield a value, what we really care about is the fact that it changes the value of a variable, thereby influencing the result of any later computation in<br>which the variable appears.</p>
<h5 id="References-and-Values"><a href="#References-and-Values" class="headerlink" title="References and Values"></a>References and Values</h5><p>there are some subtle but important differences in the semantics of assignment in different imperative languages. These differences are often invisible, because they do not affect the behavior of simple programs.</p>
<ul>
<li>值传递和引用传递</li>
<li>左值和右值</li>
</ul>
<h5 id="Boxing"><a href="#Boxing" class="headerlink" title="Boxing"></a>Boxing</h5><p>基础类型的拆装箱</p>
<h4 id="Initialization"><a href="#Initialization" class="headerlink" title="Initialization"></a>Initialization</h4><p>There are several reasons, however, why such initial values may be useful:</p>
<ul>
<li>静态变量需要初始化</li>
<li>编译器预分配初始化值优化（Java Integer预分配）</li>
<li>使用未初始化变量引起的问题</li>
</ul>
<p>It should be emphasized that initialization saves time <strong>only</strong> for variables that are <strong>statically allocated</strong>. </p>
<p>If a variable is not given an initial value explicitly in its declaration, the language may specify a <strong>default value</strong>. </p>
<h5 id="Dynamic-Checks"><a href="#Dynamic-Checks" class="headerlink" title="Dynamic Checks"></a>Dynamic Checks</h5><p>Instead of giving every uninitialized variable a default value, a language or implementation can choose to define the use of an uninitialized variable as a <strong>dynamic semantic error</strong>, and can catch these errors at run time. </p>
<h5 id="Definite-Assignment"><a href="#Definite-Assignment" class="headerlink" title="Definite Assignment"></a>Definite Assignment</h5><p>通过控制流分析静态检测未初始化变量：</p>
<p>This notion is based on the control flow of the program, and can be statically checked by the compiler.</p>
<h5 id="Constructors"><a href="#Constructors" class="headerlink" title="Constructors"></a>Constructors</h5><p>构造器默认初始化：</p>
<p>Many object-oriented languages (Java and C# among them) allow the programmer to define types for which initialization of <strong>dynamically allocated variables occurs automatically</strong>, even when <strong>no initial value is specified in the declaration</strong>.</p>
<h4 id="Ordering-within-Expressions"><a href="#Ordering-within-Expressions" class="headerlink" title="Ordering within Expressions"></a>Ordering within Expressions</h4><p>表达式内求值重要的原因：</p>
<ul>
<li>Side effects: 表达式内函数求值副作用</li>
<li>Code improvement: 求值顺序和编译器优化</li>
</ul>
<h4 id="Applying-Mathematical-Identities（数学恒等式）"><a href="#Applying-Mathematical-Identities（数学恒等式）" class="headerlink" title="Applying Mathematical Identities（数学恒等式）"></a>Applying Mathematical Identities（数学恒等式）</h4><p>表达式优化影响求值顺序会导致精度问题</p>
<h4 id="Short-Circuit-Evaluation（短路表达式）"><a href="#Short-Circuit-Evaluation（短路表达式）" class="headerlink" title="Short-Circuit Evaluation（短路表达式）"></a>Short-Circuit Evaluation（短路表达式）</h4><p>A compiler that performs <em>short-circuit evaluation</em> of Boolean expressions will generate code that skips the second half of both of these computations when the overall value can be determined from the first half.</p>
<h3 id="Structured-and-Unstructured-Flow"><a href="#Structured-and-Unstructured-Flow" class="headerlink" title="Structured and Unstructured Flow"></a>Structured and Unstructured Flow</h3><p>汇编中使用的goto（非结构化）编程被高级语言抛弃（结构化编程）</p>
<h4 id="Structured-Alternatives-to-goto"><a href="#Structured-Alternatives-to-goto" class="headerlink" title="Structured Alternatives to goto"></a>Structured Alternatives to goto</h4><p>Where once a goto might have been used to escape from the middle of a loop, most modern languages provide a <strong>break</strong> or <strong>exit</strong> statement for this purpose.</p>
<h4 id="Multilevel-Returns"><a href="#Multilevel-Returns" class="headerlink" title="Multilevel Returns"></a>Multilevel Returns</h4><p>return和 local goto都可以从当前子程序中返回，但是 nonlocal goto会破坏这种情况，如果直接goto到其他子程序中会破坏当前子程序堆栈，还需要立刻加载另一个子程序的堆栈。如果使用return这些都是在执行到return关键字时才发生的。</p>
<h4 id="Errors-and-Other-Exceptions"><a href="#Errors-and-Other-Exceptions" class="headerlink" title="Errors and Other Exceptions"></a>Errors and Other Exceptions</h4><p>需要Exceptions的原因：</p>
<blockquote>
<p>In a related and arguably more common situation, a deeply nested block or subroutine may discover that it is <strong>unable to proceed with its usual function</strong>, and moreover lacks the contextual information it would <strong>need to recover</strong> in any graceful way. </p>
</blockquote>
<p>As a structured alternative, many modern languages provide an <strong>exception-handling</strong> mechanism for convenient, nonlocal recovery from exceptions.</p>
<p>大多数语言只提供异常机制而不提供从多级调用中直接return的机制（想直接跳出多级调用只能抛异常）。</p>
<h4 id="Continuations"><a href="#Continuations" class="headerlink" title="Continuations"></a>Continuations</h4><p>The notion of nonlocal gotos that unwind the stack can be generalized by defining what are known as continuations.</p>
<p>call&#x2F;cc &#x3D;&gt; 控制流变换：</p>
<blockquote>
<p>在 Scheme 中，假设 call&#x2F;cc 捕捉到的 current continuation 为 cc(位于 lambda 中)，如果 cc 作为过程 直接或间接地被调用（即给它传值），call&#x2F;cc 会立即返回，返回值即为传入 cc 的值。即一旦 current continuation 被调用，控制流会跳到 call&#x2F;cc 处。因此，利用 call&#x2F;cc，我们可以摆脱顺序执行的限制，在程序中跳来跳去，非常灵活。</p>
</blockquote>
<h3 id="Sequencing"><a href="#Sequencing" class="headerlink" title="Sequencing"></a>Sequencing</h3><p>Like assignment, sequencing is central to imperative programming. It is the principal means of controlling <strong>the order in which side effects</strong> (e.g.,assignments) occur</p>
<p>顺序和副作用，无副作用函数可以进行指令重排提升性能。</p>
<h3 id="Selection"><a href="#Selection" class="headerlink" title="Selection"></a>Selection</h3><h4 id="Short-Circuited-Conditions"><a href="#Short-Circuited-Conditions" class="headerlink" title="Short-Circuited Conditions"></a>Short-Circuited Conditions</h4><p>虽然if else语句中包含一个布尔表达式，但是通常不需要将其结果解析出来放在寄存器中，而是拆分布尔表达式用来控制代码跳转（通过短路表达式来优化代码）。</p>
<h4 id="Case-Switch-Statements"><a href="#Case-Switch-Statements" class="headerlink" title="Case&#x2F;Switch Statements"></a>Case&#x2F;Switch Statements</h4><p>if else语句过长时可能会被优化成 switch&#x2F;case 语句（通过查表来优化代码性能）。</p>
<p>case查表也需要优化性能（如果静态值范围稀疏。。。）</p>
<h3 id="Iteration"><a href="#Iteration" class="headerlink" title="Iteration"></a>Iteration</h3><p>Iteration and recursion are the two mechanisms that allow a computer to perform similar operations repeatedly. </p>
<h4 id="Enumeration-Controlled-Loops（for循环）"><a href="#Enumeration-Controlled-Loops（for循环）" class="headerlink" title="Enumeration-Controlled Loops（for循环）"></a>Enumeration-Controlled Loops（for循环）</h4><p>在编译器生成代码时的一个可能的优化是预先计算迭代次数：<code>max([last-first+step]/step, 0)</code></p>
<p>枚举控制循环的几个设计问题：</p>
<ol>
<li>Can control enter or leave the loop in any way other than through the enumeration mechanism? &#x3D;&gt; break&#x2F;exit</li>
<li>What happens if the loop body modifies variables that were used to compute the end-of-loop bound? &#x3D;&gt; 不允许</li>
<li>What happens if the loop body modifies the index variable itself? &#x3D;&gt; 禁止在循环体内自己更新索引</li>
<li>Can the program read the index variable after the loop has completed, and if so, what will its value be? &#x3D;&gt; 循环结束后索引值是未定义的</li>
</ol>
<h4 id="Combination-Loops"><a href="#Combination-Loops" class="headerlink" title="Combination Loops"></a>Combination Loops</h4><p>自定义步长的for循环</p>
<h4 id="Iterators"><a href="#Iterators" class="headerlink" title="Iterators"></a>Iterators</h4><ul>
<li>range()</li>
<li>对象迭代器</li>
<li>惰性迭代流</li>
</ul>
<h3 id="Recursion-递归"><a href="#Recursion-递归" class="headerlink" title="Recursion 递归"></a>Recursion 递归</h3><h4 id="Iteration-and-Recursion"><a href="#Iteration-and-Recursion" class="headerlink" title="Iteration and Recursion"></a>Iteration and Recursion</h4><p>Iteration is in some sense the more “natural” of the two in imperative languages, because it is based on the repeated modification of variables. </p>
<p>Recursion is the more natural of the two in functional languages, because it does not change variables.</p>
<p>通常认为迭代比递归更高效，但是编译器优化也可以生成高效的递归代码，特别是尾递归代码的优化（不需要额外生成新的函数堆栈，可以重用当前函数的栈空间）</p>
<p>编译器也可以优化非尾递归代码，转换为尾递归代码执行。</p>
<p>使用递归思想思考代码（没有副作用的递归）可以产生更少的bug。</p>
<h4 id="Applicative-and-Normal-Order-Evaluation"><a href="#Applicative-and-Normal-Order-Evaluation" class="headerlink" title="Applicative- and Normal-Order Evaluation"></a>Applicative- and Normal-Order Evaluation</h4><p>Throughout the discussion so far we have assumed implicitly that arguments are <strong>evaluated before passing them to a subroutine</strong>. This need not be the case. It is possible to <strong>pass a representation of the unevaluated arguments to the subroutine</strong> instead, and to evaluate them only when (if) the value is actually needed.</p>
<p>惰性求值</p>
<h3 id="Nondeterminacy"><a href="#Nondeterminacy" class="headerlink" title="Nondeterminacy"></a>Nondeterminacy</h3><p>不确定的控制流（运行时才能确定）。</p>
<h3 id="Summary-and-Concluding-Remarks"><a href="#Summary-and-Concluding-Remarks" class="headerlink" title="Summary and Concluding Remarks"></a>Summary and Concluding Remarks</h3><p>在本章中，我们介绍了编程语言中发现的主要控制流形式：顺序、选择、迭代、程序抽象、递归、并发、异常处理和推测以及不确定性。顺序指定某些操作按顺序发生，一个接一个。选择表达了在两个或更多控制流替代方案之间的选择。迭代和递归是重复执行操作的两种方式。递归以自身的简单实例定义操作；它依赖于程序抽象。迭代重复一个操作以获得其副作用。顺序和迭代是命令式（特别是冯·诺依曼）编程的基础。递归是函数式编程的基础。不确定性允许程序员故意不指定控制流的某些方面。我们只简要地触及了并发；它将是第12章的主题。程序抽象（子程序）是第8章的主题。异常处理和推测将在第8.5节和第12.4.4节中介绍。</p>
<p>在我们对控制流机制的调查之前，我们讨论了表达式评估。我们考虑了左值和右值之间的区别，以及变量的值模型和引用模型之间的区别，在值模型中，变量是数据的命名容器，在引用模型中，变量是对数据对象的引用。我们考虑了表达式内的优先级、结合性和排序问题。我们检查了短路布尔评估及其通过跳转代码的实现，这既是一个影响表达式正确性的语义问题（其子部分并非总是定义良好），也是一个影响评估复杂布尔表达式所需时间的实现问题。</p>
<p>构造的发展受到了许多目标的驱动，包括编程的便利性、语义的优雅性、实现的便利性和运行时效率。在某些情况下，这些目标被证明是互补的。例如，我们已经看到短路评估既导致更快的代码，也（在许多情况下）导致更清晰的语义。同样地，为枚举控制循环的索引变量引入一个新的局部作用域，避免了循环后索引值的语义问题和（在某种程度上）潜在溢出的实现问题。</p>
<p>在其他情况下，语言语义的改进被认为值得在运行时效率上付出一点小代价。我们在迭代器的发展中看到了这一点：像许多形式的抽象一样，它们在许多情况下增加了适度的运行时成本（例如，与显式嵌入枚举集合的实现到循环的控制流中相比），但却带来了模块化、清晰性和代码重用机会的巨大回报。同样地，Java的开发者会辩称，对于许多应用程序来说，通过广泛的语义检查、标准格式的数值类型等提供的可移植性和安全性远比速度更重要。</p>
<p>在一些情况下，编译器技术的进步或设计者构建更复杂编译器的简单意愿，使得整合曾被认为过于昂贵的功能成为可能。Ada中的案例语句的标签范围要求编译器准备生成采用二进制搜索的代码。C++中的内联函数消除了在微小函数的低效率和宏的混乱语义之间选择的需要。异常（如我们将在第8.5.3节中看到）可以以这样一种方式实现，即在常见情况下（当它们不发生时）不会产生任何成本，但实现相当复杂。迭代器、装箱、泛型（第8.4节）和一级函数同样相当复杂，但在主流命令式语言中越来越常见。</p>
<p>一些实现技术（例如，重新排列表达式以发现公共子表达式，或者在找到可接受的选择后避免在不确定性构造中评估守卫）足够重要，以至于可以证明对程序员施加适度负担是合理的（例如，在必要时添加括号以避免溢出或确保数值稳定性，或确保守卫中的表达式没有副作用）。其他在语义上有用的机制（例如，惰性评估、续体或真正随机的不确定性）通常被认为足够复杂或昂贵，只在特殊情况下才值得使用（如果有的话）。</p>
<p>在相对原始的语言中，我们通常可以通过编程约定获得一些缺失功能的好处。例如，在早期的Fortran方言中，我们可以限制goto的使用，以模仿更现代语言的控制流。在没有短路评估的语言中，我们可以编写嵌套的选择语句。在没有迭代器的语言中，我们可以编写一组提供等效功能的子程序。</p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/%E6%A0%87%E7%AD%BE/%E7%BC%96%E8%AF%91%E5%99%A8/" rel="tag"># 编译器</a>
              <a href="/%E6%A0%87%E7%AD%BE/Programming-Language-Pragmatics/" rel="tag"># Programming Language Pragmatics</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2024/03/14/programming-language-pragmatics-05/" rel="prev" title="《Programming Language Pragmatics》第四章笔记">
                  <i class="fa fa-angle-left"></i> 《Programming Language Pragmatics》第四章笔记
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2024/07/10/programming-language-pragmatics-07/" rel="next" title="《Programming Language Pragmatics》第七章笔记">
                  《Programming Language Pragmatics》第七章笔记 <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="user"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">MisakaTang</span>
  </div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/pisces/" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>

  <a href="https://github.com/TangMisaka23001" class="github-corner" title="在 GitHub 上关注我" aria-label="在 GitHub 上关注我" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/sidebar.js"></script><script src="/js/next-boot.js"></script>

  




  <script src="/js/third-party/pace.js"></script>


  




  

  <script class="next-config" data-name="enableMath" type="application/json">false</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","mhchem":false,"js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>



</body>
</html>
